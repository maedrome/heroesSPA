import{a as _,b as Se}from"./chunk-5MUF5WAN.js";import"./chunk-7EJ72ASH.js";import{B as ne,C as ae,D as le,E as me,F as se,G as ce,H as de,I as pe,J as ue,K as fe,O as he,P as ge,T as be,U as _e,W as D,a as O,b as $,c as W,d as Y,e as z,f as p,g as J,i as K,j as Q,k as U,l as X,m as Z,n as ee,q as y,s as te,u as ie,w as re,y as oe}from"./chunk-356WMELQ.js";import"./chunk-JGYM447R.js";import{f as q,h as L}from"./chunk-U5LOJRI2.js";import{l as w,o as M}from"./chunk-FQX2LY3L.js";import{A as E,Ab as t,Bb as e,Cb as c,Eb as k,Hb as u,Jb as g,Rb as o,Sb as b,T as N,Va as m,Vb as v,Wa as I,Wb as h,Yb as G,Zb as B,da as f,ia as S,mb as F,mc as j,nb as H,ob as P,rb as s,sa as x,ta as C,wb as T,xb as A,yb as R,zb as V}from"./chunk-QDOQSJTN.js";var ye=()=>({"border-radius":"none"}),De=()=>({"font-weight":"700","font-family":"Comic Neue, cursive","padding-bottom":"0.3rem"}),Ee=()=>({"padding-bottom":"0px"}),xe=(()=>{let a=class a{constructor(r,i){this.dialogRef=r,this.data=i}onDecline(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}};a.\u0275fac=function(i){return new(i||a)(I(ne),I(ae))},a.\u0275cmp=S({type:a,selectors:[["app-confirm-dialog"]],standalone:!0,features:[v],decls:17,vars:7,consts:[[3,"ngStyle"],["mat-dialog-title","",3,"ngStyle"],[1,"font-bold","text-gray-800"],[1,"flex","justify-between","pb-2","px-6","w-full"],["mat-button","","color","warn",3,"click"],[1,"font-extrabold","text-base"],["mat-button","","color","primary",3,"click"]],template:function(i,d){i&1&&(t(0,"div",0)(1,"span",1),o(2,"Are you sure?"),e(),t(3,"mat-dialog-content",0)(4,"p",2),o(5,"This will delete the hero "),t(6,"em"),o(7),e(),o(8," and all of its related data."),e()(),t(9,"mat-dialog-actions")(10,"div",3)(11,"button",4),u("click",function(){return d.onDecline()}),t(12,"span",5),o(13,"Cancel"),e()(),t(14,"button",6),u("click",function(){return d.onConfirm()}),t(15,"span",5),o(16,"Yes"),e()()()()()),i&2&&(s("ngStyle",h(4,ye)),m(),s("ngStyle",h(5,De)),m(2),s("ngStyle",h(6,Ee)),m(4),b(d.data.superhero))},dependencies:[M,w,D,y,me,ce,se]});let n=a;return n})();var Ie=()=>[O,y,te,re,ie,oe,ee,Z,ue,fe,ge,J,$,W,Y,U,K,Q,import("./chunk-6INZCKJA.js").then(n=>n.HeroImagePipe)],Fe=()=>({"font-family":"Bangers, system-ui",color:"#000000","box-shadow":"8px 8px rgb(0 0 0 / 80%)",border:"3px solid black"});function ke(n,a){if(n&1&&(t(0,"mat-option",14)(1,"span"),o(2),e()()),n&2){let l=a.$implicit;s("value",l),m(2),b(l)}}function Ne(n,a){if(n&1){let l=k();t(0,"button",19),u("click",function(){x(l);let i=g(2);return C(i.openDialog())}),t(1,"mat-icon"),o(2,"delete"),e(),o(3," Delete "),e()}}function He(n,a){if(n&1){let l=k();t(0,"div",3)(1,"mat-card",4)(2,"mat-card-content")(3,"form",5),u("ngSubmit",function(){x(l);let i=g();return C(i.onSubmit())}),t(4,"div",6)(5,"mat-form-field",7)(6,"mat-label"),o(7,"Superhero"),e(),c(8,"input",8),e(),t(9,"mat-form-field",7)(10,"mat-label"),o(11,"Alter Ego"),e(),c(12,"input",9),e()(),t(13,"mat-form-field",10)(14,"mat-label"),o(15,"First Appearance"),e(),c(16,"input",11),e(),t(17,"mat-form-field",10)(18,"mat-label"),o(19,"Characters"),e(),c(20,"input",12),e(),t(21,"mat-form-field",10)(22,"mat-label"),o(23,"Publisher"),e(),t(24,"mat-select",13),R(25,ke,3,2,"mat-option",14,A),e()(),t(27,"mat-form-field",10)(28,"mat-label"),o(29,"Alternative Image"),e(),c(30,"input",15),e()(),t(31,"mat-card-actions"),F(32,Ne,4,0,"button",16),c(33,"span",7),t(34,"button",17),u("click",function(){x(l);let i=g();return C(i.onSubmit())}),t(35,"mat-icon"),o(36,"save"),e(),o(37," Save "),e()()()(),t(38,"mat-card",4),c(39,"img",18),G(40,"heroImage"),e()()}if(n&2){let l=g();m(3),s("formGroup",l.heroForm),m(22),V(l.publishers),m(7),T(32,l.currentId!==""?32:-1),m(2),s("disabled",l.heroForm.invalid||l.heroForm.pristine),m(5),s("srcset",B(40,4,l.currentHero))}}function Pe(n,a){n&1&&(t(0,"mat-grid-list",20)(1,"mat-grid-tile"),c(2,"mat-spinner"),e()())}var at=(()=>{let a=class a{constructor(){this.heroesService=f(Se),this.route=f(q),this.router=f(L),this.publishers=[_.DCComics,_.MarvelComics,_.ONE],this.currentId="",this.heroForm=new z({id:new p(""),superhero:new p("",{nonNullable:!0}),publisher:new p(_.DCComics),alter_ego:new p(""),first_appearance:new p(""),characters:new p(""),alt_img:new p("")}),this.detectChange=j(()=>{this.heroesService.currentHero(),this.router.url.includes("edit")&&this.heroForm.reset(this.heroesService.currentHero())}),this.snackbar=f(be),this.dialog=f(le)}get currentHero(){return this.heroForm.value}get title(){return this.router.url.includes("edit")?"Edit Hero":"New Hero"}getRouteParams(){this.route.params.subscribe(r=>{this.currentId=r.id,this.heroesService.getHero(r.id)})}generateId(){return`${this.currentHero.publisher.trim().toLowerCase().replace(/\s/g,"-")}-${this.currentHero.superhero.trim().toLowerCase().replace(/\s/g,"-")}`}onSubmit(){if(this.heroForm.valid){if(this.currentHero.id===""){this.currentHero.id=this.generateId(),this.heroesService.addHero(this.currentHero).subscribe(r=>{this.showSnackbar(`${r.superhero} has been added.`),this.router.navigate(["/heroes/edit-hero",r.id])});return}this.heroesService.updateHero(this.currentHero).subscribe(r=>{this.showSnackbar(`${r.superhero} has been updated.`),this.heroForm.markAsPristine()})}}showSnackbar(r){this.snackbar.open(r,"",{duration:3e3,panelClass:["success-snackbar"]})}openDialog(){this.dialog.open(xe,{data:this.heroesService.currentHero()}).afterClosed().pipe(E(i=>i),N(i=>this.heroesService.deleteHero(this.heroesService.currentHero().id)),E(i=>i)).subscribe(i=>{this.router.navigate(["/heroes/list"])})}ngOnInit(){this.router.url.includes("edit")&&this.getRouteParams()}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=S({type:a,selectors:[["app-new-page"]],standalone:!0,features:[v],decls:8,vars:4,consts:[[1,"md:gap-6","px-3","md:px-6","lg:px-8","xl:px-12","py-4"],[1,"p-2","md:p-3","bg-white","w-fit","text-2xl","md:text-3xl","border-y-2","border-x-2","border-black","tracking-wider",3,"ngStyle"],[1,"w-full","h-2"],[1,"flex","flex-col","md:flex-row","items-center","justify-center","gap-0","md:gap-6","pb-6","md:pb-7"],[1,"w-4/5","md:w-2/5","max-w-lg","custom-card"],[3,"ngSubmit","formGroup"],[1,"flex","w-full","gap-1"],[1,"flex-1"],["matInput","","placeholder","Superhero","required","","formControlName","superhero"],["matInput","","placeholder","Alter Ego","required","","formControlName","alter_ego"],[1,"w-full"],["matInput","","placeholder","First Appearance","name","first_appearance","required","","formControlName","first_appearance"],["matInput","","placeholder","Characters","name","characters","required","","formControlName","characters"],["formControlName","publisher","required",""],[3,"value"],["matInput","","placeholder","Alternative Image","name","alt_image","formControlName","alt_img"],["mat-flat-button","","color","warn"],["mat-flat-button","","color","primary",3,"click","disabled"],["mat-card-image","","alt","hero_image",3,"srcset"],["mat-flat-button","","color","warn",3,"click"],["cols","1"]],template:function(i,d){i&1&&(t(0,"div",0)(1,"p",1),o(2),e(),c(3,"div",2),F(4,He,41,6)(5,Pe,3,0),H(6,4,Ie,null,5),e()),i&2&&(m(),s("ngStyle",h(3,Fe)),m(),b(d.title),m(4),P(d.currentId===d.heroesService.currentHero().id||d.currentId===""))},dependencies:[M,w,D,pe,de,he,X,_e],styles:["[_nghost-%COMP%]     .custom-card{border:3px solid black;border-radius:0;box-shadow:10px 10px}"]});let n=a;return n})();export{at as default};
